/*! bc 17-04-2017 */

!function(a,b,c){"use strict";a.$scope={},c.$bindKey={},c.syntax={},c.funcs={},c.util={},c.init=function(){var a,b;if(this.hideRepeat)for(a=c.util.querySelectorAll("[data-repeat-name]"),b=0;b<a.length;b++)this.util.show(a[b],!1);if(this.hideBind)for(a=c.util.querySelectorAll("[data-bind]"),b=0;b<a.length;b++)this.util.show(a[b],!1)},c.bindData=function(b,d){void 0===d&&(d=b,b="__data__"),a.$scope[b]=d;var e=c.util.querySelectorAll("[data-bind]");if(e&&e.length){var f,g,h,i,j;for(f=0;f<e.length;f++){g="",j=e[f].attributes["data-bind"].value,"__data__"!=b&&-1!=j.indexOf(".")&&(j=j.substring(b.length+1));var k=this.util.getBindToNameList(e[f]),l=0;if(k.length>0)for(;l<k.length;l++){i=k[l],h=e[f].attributes[i]?e[f].attributes[i].value:e[f][i];var m=c.syntax.cacheFunc("bind",h,h);g=m.func?m.func(this,d):"innerHTML"===i?this.util.getValue(j,d):this.util.html(this.util.getValue(j,d))}else if("IMG"==e[f].tagName&&e[f].attributes["data-bind-src"]){var n=c.syntax.cacheFunc("bind",e[f].attributes["data-bind-src"].value,e[f].attributes["data-bind-src"].value);g=n.func?n.func(this,d):this.util.getValue(j,d)}else g=this.util.html(this.util.getValue(j,d));this.util.setValue(e[f],g),this.util.show(e[f])}}},c.bindName=function(a,b){var d=c.util.querySelectorAll('[data-bind="'+a+'"]');if(d)for(var e=0;e<d.length;e++)this.util.setValue(d[e],b),this.util.show(d[e])},c.bindRepeatData=function(a,b,d,e,f){if(void 0===b&&(b=a,a="data"),b&&c.util.isArray(b))for(var g=c.util.querySelectorAll('[data-repeat-name="'+a+'"]'),h=0;h<g.length;h++)c.doRepeat(a+"_"+h,b,d,e,f,g[h])},c.doRepeat=function(a,b,c,d,e,f){"string"!=typeof e&&(e=f.innerHTML);var g=this.syntax.cacheFunc("repeat",a,e),h=0;c&&!g.isFirst||(f.innerHTML="");var i=g.func;if(i)if(!0===d)this.appendData(b,0,f,i,c);else{var j="";for(h=0;h<b.length;h++){var k=b[h];k.__index__=h,j+=i(this,k)}this.setRepeatHtml(f,j,c)}},c.appendData=function(a,b,d,e,f){var g=a[b];g.__index__=b,c.setRepeatHtml(d,e(this,g),0!==b||!0===f),++b<a.length&&setTimeout(function(){c.appendData(a,b,d,e,f)},50)},c.setRepeatHtml=function(a,b,d){!0===d?a.innerHTML+=b:a.innerHTML=b,c.util.show(a)},c.addFunc=function(a,b){b&&a&&(this.funcs[a]=b)}}(window,document,window.jsRender={}),function(a,b){"use strict";b.trim=function(a){return"string"==typeof a?a.replace(/\r/g,"").replace(/\n/g,"").replace("　","").trim():b.isPlainObject(a)?b.trim(b.getDefaultValue(a)):String.valueOf(a)},b.isPlainObject=function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},b.setValue=function(a,b){var c=a.tagName,d=0,e=this.getBindToNameList(a);if(e.length>0)for(d in e){var f=e[d];a.attributes[f]?a.setAttribute(f,b):a[f]=b}else switch(c){case"IMG":a.src=b;break;case"INPUT":a.value=b;break;case"SELECT":for(d=0;d<a.options.length;d++)if(a.options[d].value==b){a.options[d].selected=!0;break}break;default:a.innerHTML=b}},b.html=function(a){return a&&"string"==typeof a?(a=a.replace(/<[^<]*>/gi,""),a.trim()):this.getDefaultValue(a)},b.isArray=Array.isArray||function(a){return a instanceof Array},b.getName=function(a,c){var d=c[a];switch(typeof d){case"string":case"number":case"boolean":return[a];case"object":if(b.isArray(d))return[a];var e=[];for(var f in d)if(d.hasOwnProperty(f))for(var g=b.getName(f,d),h=0;h<g.length;h++)e.push(a+"."+g[h]);return e;default:return[]}},b.startWith=function(a,b){return"string"==typeof a&&0===a.indexOf(b)},b.isNumber=function(a){return null!==a.match(/^(-?\d+)(\.\d+)?/)},b.getValue=function(a,b){for(var c=a.split("."),d=b[c.shift()],e=0;d&&e<c.length;e++)d=d[c[e]];return this.getDefaultValue(d)},b.getDefaultValue=function(a){return null===a||void 0===a?"":a},b.gotoUrl=function(){var b="",c=0;for(arguments.length>0&&(b=arguments[c]),-1!=b.indexOf("?")?b+="&":b+="?",c=1;c<arguments.length-1;c+=2)b+=arguments[c]+"="+encodeURIComponent(arguments[c+1])+"&";a.location.href=b},b.getBindToNameList=function(a){var c=a.attributes["data-bind-to"],d=[];if(c&&c.value)for(var e,f=c.value.split(" "),g=0;g<f.length;g++)""!==(e=b.trim(f[g]))&&d.push(e);return d},b.show=function(a,c){a&&(!1!==c?("none"==a.style.display&&(a.style.display=""),b.removeClass(a,"hide")):a.style.display="none")},b.addClass=function(a,b){if(a.classList)a.classList.contains(b)||a.classList.add(b);else{var c=a.className;if(c){for(var d=c.split(" "),e=!1,f=0;f<d.length;f++)d[f]==b&&(e=!0);e||d.push(b),c=d.join(" ")}else c=b;a.className=c}},b.removeClass=function(a,b){if(a.classList)a.classList.contains(b)&&a.classList.remove(b);else{var c=a.className;if(c){var d=c.split(" ");c="";for(var e=0;e<d.length;e++)d[e]!=b&&(c+=d[e]);a.className=c}}},b.getUrlQuery=function(){var b={},c=a.location.search;if(c&&c.length>1){c=c.substring(1);var d=c.indexOf("#");-1!=d&&(c=c.substring(0,d));for(var e=c.split("&"),f=0;f<e.length;f++)if(-1!=(d=e[f].indexOf("="))){var g=e[f].substring(0,d);if(g){var h=e[f].substring(d+1);h&&(b[g]=decodeURIComponent(h))}}}return b},b.setUrlQuery=function(b){var c="";for(var d in b)b[d]&&(c+=d+"="+encodeURIComponent(b[d])+"&");a.location.search=c},b.querySelectorAll=function(a){if(document.querySelectorAll)return document.querySelectorAll(a)},b.eval=function(a){return new Function("return "+a)()}}(window,window.jsRender.util),function(a){function b(a){for(var b,e=0,f=0,g=0,h=[];e<a.length;)f=a.indexOf("{",e),-1!==f?(g=i(a,f,"}"),-1===g&&(g=a.length),b=a.substring(f+1,g).trim(),h.push(c(a.substring(e,f))),""!==b&&h.push(d(b))):(h.push(c(a.substring(e))),g=a.length),e=g+1;return h.join("+")}function c(b){return"string"==typeof b?'"'+b.replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace("data-bind-src","src")+'"':a.util.getStringValue(b)}function d(a){var b=!0;if("!"==a[0]&&(a=a.substring(1),b=!1),a){var c=h(a);if(c.length>0)return b?"JsRender.util.html("+e(c,c.length-1)+")":e(c,c.length-1)}return'""'}function e(a,b){if(1===a.length)return g(a[0]);if(!(b>0))return g(a[0]);for(var c=[],d=0,h="";b>=0;b--){if("|"===a[b]){var i=c.pop();for(d=c.length;d>0;d--)h+=g(c[d-1]);return h=e(a,b-1)+h,f(i)+"("+h+")"}c.push(a[b])}if(c.length>0){for(d=c.length;d>0;d--)h+=g(c[d-1]);return h}return""}function f(b){return b&&b.length>1&&"#"==b.charAt(0)?b.substring(1):a.funcs[b]?'my.funcs["'+b+'"]':"my.funcs.noFunc"}function g(a){var b="";switch(a.charAt(0)){case"+":case"-":case"*":case"/":case"(":case")":case"'":case'"':case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b+=a;break;case"|":b+="+";break;case",":b+=",";break;case"#":b+=a.substring(1);break;default:b+="my.util.getValue('"+a+"',vo)"}return""===b?"''":b}function h(a){for(var b,c=[],d="",e=0,f=0;f<a.length;f++)switch(b=a.charAt(f)){case"|":case",":case"+":case"-":case"*":case"/":""!==d&&(c.push(d),d=""),c.push(b);break;case'"':case"'":""!==d&&(c.push(d),d=""),e=i(a,f,b),e>0&&(c.push(a.substring(f,e+1)),f=e);break;default:b&&" "!==b&&(d+=b)}return""!==d&&c.push(d),c}function i(a,b,c){for(var d=b+1;d<a.length;d++){if(a.charAt(d)==c)return d;if('"'==a.charAt(d)||"'"==a.charAt(d)){if(0===(b=i(a,d,a.charAt(d))))return 0;d=b}}return 0}a.syntax.cache={},a.syntax.buildFunc=function(c,d){var e;try{e=decodeURIComponent(d)}catch(a){e=d}if(e=a.util.trim(e),e.length>0){var f="return "+b(e)+";";try{return new Function("my","vo",f)}catch(a){console.log("解析模板"+c+"出错，"+a.message),console.log(f)}}return!1},a.syntax.cacheFunc=function(a,b,c){var d=this.cache[a+"-func-"+b],e={func:d};return d||(d=this.buildFunc(b,c))&&(this.cache[a+"-func-"+b]=d,e.isFirst=!0,e.func=d),e}}(window.jsRender),function(a,b){"use strict";a.addFunc("default",function(a,b){return void 0===a||void 0===a||""===a||"null"===a?b:a}),a.addFunc("empty",function(a,b,c){return void 0===a||void 0===a||""===a||"null"===a?b:c}),a.addFunc("case",function(a){for(var b=1;b<arguments.length;b+=2)if(a==arguments[b]&&b<arguments.length-1)return arguments[b+1];return arguments[arguments.length-1]}),a.addFunc("format_money",function(a){return parseFloat(a)}),a.addFunc("format_date",function(a,b){"object"!=typeof a&&(a=new Date(parseInt(a))),b||(b="yyyy-MM-dd hh:mm:ss");var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b}),a.addFunc("fixed",function(a,b){return void 0===b&&(b=0),"number"==typeof a?a.toFixed(b):a}),a.addFunc("noFunc",function(){return"没有找到正确的处理函数"}),a.addFunc("repeat",function(a,b){for(var c="",d=0;d<a;d++)c+=b;return c}),a.addFunc("range",function(b,c){var d="";if(c){c=c.replace(/\(/g,"{").replace(/\)/g,"}");var e=a.syntax.buildFunc("range",c);if(e)for(var f=0;f<b.length;f++)d+=e(a,b[f])}return d}),a.addFunc("filter_html",function(b){return a.util.html(b)}),a.addFunc("left",function(a,b,c){var d=0,e="",f="",g=0;c&&(g=c.length);for(var h=a.replace(/[^\x00-\xff]/g,"**").length,i=0;i<h;i++){if(f=a.charAt(i).toString(),null!==f.match(/[^\x00-\xff]/g)?d+=2:d++,d+g>b){g>0&&(e+=c);break}e+=f}return e})}(window.jsRender),function(a,b,c,d){"use strict";c.isInit=!1,c.optAjax=!1,c.hideRepeat=!1,c.hideBind=!1,c.ready=function(a){c.isInit?"function"==typeof a&&(c.callback=a,c.callback()):"function"==typeof a&&(c.callback=a)},c.init=function(){c.isInit||(c.isInit=!0,d.init(),c.callback&&c.callback())},c.query=function(a,c){b.query_args||(b.query_args=d.util.getUrlQuery());var e=b.query_args[a];return void 0===e||""===e?c:e},c.util=d.util,c.load=function(a,b,e,f,g,h){var i={};i.url=b,""!==e&&void 0!==e||(e=d.util.getUrlQuery()),i.data=e,i.type="POST",h?i.error=h:"function"==typeof c.error_callback?i.error=c.error_callback:i.error=function(a,b){console.log(a,b)},i.success=function(b){"string"==typeof b&&(b=d.util.eval("("+b+")"));var e=!!b;"function"==typeof c.checkData&&(c.checkData(b)||(e=!1)),e&&f&&((b=f(b))||(e=!1)),e&&(d.util.isArray(b)?d.bindRepeatData(a,b):a?d.bindData(a,b):d.bindData(b)),g&&g(e,b)},c.isInit&&(c.optAjax?c.optAjax.ajax(i):$.ajax(i))},c.setAjax=function(a){this.optAjax=a};var e=function(){return!(!/complete|loaded|interactive/.test(document.readyState)||!document.body)&&(c.init(),!0)},f=function(){e()||setTimeout(f,5)};e()||(document.addEventListener?document.addEventListener("DOMContentLoaded",function(){e()},!1):setTimeout(f,5))}(document,window,window.jsTemplate={},window.jsRender),function(a){"use strict";document.querySelectorAll||(a.querySelectorAll=function(a){var b=$(a),c=[];return b.each(function(a,b){c.push(b)}),c}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}(window.jsRender.util),function(a,b,c,d){function e(a,e){var f;f=a.f_datafilter!==d?a.f_datafilter(e):e.data,f&&(c.util.isArray(f)?f.length>c.animationBindMin?b.bindRepeatData(a.id,f,a.isAppend,a.isAnimation):b.bindRepeatData(a.id,f,a.isAppend):a.id?b.bindData(a.id,f):b.bindData(f)),a.f_success!==d&&a.f_success(f)}c.debug=!1,c.disableError=!1,c.optAjax="undefined"!=typeof jQuery&&jQuery,c.root="",c.apiroot="",c.initFunction=[],c.readyFunction=[],c.alert=function(a){window.alert(a)},c.toast=function(a){window.alert(a)},c.confirm=function(a,b){window.confirm(a)&&b()},c.back=function(a){document.referrer&&!0===a?location.href=document.referrer:history.back()},c.on=function(a,b,c,d,e){"undefined"!=typeof jQuery&&jQuery(a).on(b,c,d,e)},c.go=function(a,c){b.util.gotoUrl(a,c)},c.reload=function(){location.reload()},c.showLogin=function(){location.href="login.html"},c.closeLogin=function(){c.back(!0)},c.error=function(a){a&&a.relogin?c.showLogin():a&&"string"==typeof a.error?c.toast(a.error):"string"==typeof a?c.toast(a):c.debug&&c.toast("数据请求出错，请检查网络是否可以正常访问！")},c.ready=function(b){if("function"==typeof b){var d={executed:!1,callback:b};a.isInit&&(d.callback(),d.executed=!0),c.readyFunction.push(d)}},c.ajaxBind=function(a,b,d,e,f,g){return void 0===b&&(b=a,a=""),c.ajax(b,d).bind(a).filter(e).success(f).error(g)},c.ajax=function(a,f){""!==f&&void 0!==f||(f=b.util.getUrlQuery());var g={id:"",url:a,param:f,f_datafilter:d,f_success:d,f_error:function(a){c.error(a)},isAppend:!1,isAnimation:c.animationBind};return g.filter=function(a){return"function"==typeof a&&(this.f_datafilter=a),this},g.success=function(a){return"function"==typeof a&&(this.f_success=a),this},g.error=function(a){return"function"==typeof a&&(this.f_error=a),this},g.bind=function(a){return this.id=a,this},g.append=function(a){return this.isAppend=!0===a,this},g.animation=function(a){return this.isAnimation=!0===a,this},c.util.isPlainObject(g.param)||(g.param={}),c.login&&(g.param.token=c.login.token),c.enableJsonp?c.jsonp.get(c.root+c.apiroot+g.url,g.param,function(a){e(g,a)},function(a){g.f_error(a)}):c.http.post(c.root+c.apiroot+g.url,g.param,function(a){e(g,a)},function(a){g.f_error(a)}),g},c.iBind=function(a,b,e,f){return void 0===b&&(b=a,a=""),"function"==typeof e&&(f=e,e=d),c.util.setHide("#"+a+"_loading",!1),c.ajax(b,e).filter(function(b){return b.data?(c.util.isArray(b.data)&&(b.data.length>0?c.util.setHide("#"+a+"_empty"):c.util.setHide("#"+a+"_empty",!1)),b.data):(c.util.setHide("#"+a+"_loading"),!1)}).success(f).bind(a)},c.animationBind=!1,c.enableJsonp=!1,c.animationBindMin=5,c.postForm=function(a,b,e,f,g){"function"==typeof e&&(g=f,f=e,e={}),c.util.isPlainObject(e)||(e={});var h=c.form.getFormParam(a,!0);if(h!==d){for(var i in e)""!==i&&e[i]&&(h[i]=e[i]);c.post(b,h,f,g)}},c.post=function(a,d,e,f){"function"==typeof d&&(f=e,e=d,d={}),""!==d&&void 0!==d||(d=b.util.getUrlQuery()),c.util.isPlainObject(d)||(d={}),c.login&&(d.token=c.login.token),"function"!=typeof f&&(f=c.error),c.http.post(c.root+c.apiroot+a,d,e,f)},c.get=function(a,d,e,f){"function"==typeof d&&(f=e,e=d,d={}),""!==d&&void 0!==d||(d=b.util.getUrlQuery()),c.util.isPlainObject(d)||(d={}),c.login&&(d.token=c.login.token),"function"!=typeof f&&(f=c.error),c.enableJsonp?c.jsonp.get(c.root+c.apiroot+a,d,e,f):c.http.post(c.root+c.apiroot+a,d,e,f)},c.bind=function(a,c){b.bindName(a,c)},c.bindRepeatData=function(a,c){b.bindRepeatData(a,c)},c.bindData=function(a,c){b.bindData(a,c)},c.bindApp=!0,a.ready(function(){c.debug||(document.oncontextmenu=function(){return!1});for(var a=0;a<c.initFunction.length;a++)c.initFunction[a](c);c.bindApp&&b.bindData("app",c);for(var d=0;d<c.readyFunction.length;d++)!function(a){a.executed||(a.executed=!0,setTimeout(function(){a.callback()},1))}(c.readyFunction[d])})}(window.jsTemplate,window.jsRender,window.app={}),function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.insertAfter=function(a,b){var c=b.parentNode;c&&(c.lastChild==b?c.appendChild(a):c.insertBefore(a,b.nextSibling))},a.setValue=function(c,d){a.isPlainObject(d)&&(d=JSON.stringify(d)),a.each(b.querySelectorAll(c),function(a,b){switch(b.tagName){case"IMG":b.src=d;break;case"INPUT":b.value=d;break;default:void 0!==b.innerText?b.innerText=d:b.value=d}},!0)},a.setDisabled=function(c,d){void 0===d&&(d=!0),a.each(b.querySelectorAll(c),function(a,b){b.disabled=d},!0)},a.setHide=function(c,d){void 0===d&&(d=!0),a.each(b.querySelectorAll(c),function(a,c){d?"none"!=c.style.display&&(c.style.display="none"):("none"==c.style.display&&(c.style.display=""),b.removeClass(c,"hide"))},!0)},a.timedCallback=function(b,c){c&&!0===c(b)&&(b=0),--b>=0&&setTimeout(function(){a.timedCallback(b,c)},1e3)},a.each=function(a,b){if(a&&b){var c,d=0,e=a.length;if(void 0===e||"function"==typeof a){for(c in a)if(!1===b.call(a[c],c,a[c]))break}else for(;d<e&&!1!==b.call(a[d],d,a[d++]););return a}},a.isArray=Array.isArray||function(a){return a instanceof Array},a.extend=function(b){var c,d,e;for(c=1;c<arguments.length;c++)if(e=arguments[c],a.isPlainObject(e))for(d in e)null!==e[d]&&void 0!==e[d]&&(b[d]=e[d]);return b},a.isPlainObject=function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},a.log=function(){if(app.debug)for(var a in arguments)console.log(JSON.stringify(arguments[a]))},a.query=function(c,d){a.query_args||(a.query_args=b.getUrlQuery());var e=a.query_args[c];return void 0===e||""===e?d:e},a.hash=function(a){var b,c=0;if(0===a.length)return c;for(var d=0;d<a.length;d++)b=a.charCodeAt(d),c=(c<<5)-c+b,c&=c;return c},a.eval=function(a){return new Function("return "+a)()}}(window.app.util={},window.jsTemplate.util),function(a){var b=function(){return b.get.apply(b,arguments)},c=b.utils={encode:function(a){return String(a).replace(/[,;"\\=\s%]/g,function(a){return encodeURIComponent(a)})},decode:function(a){return decodeURIComponent(a)}};b.expiresMultiplier=86400,b.set=function(b,d,e){return e=new Date(new Date+1e3*this.expiresMultiplier*e),""!==e&&"toGMTString"in e&&(e=";expires="+e.toGMTString()),a.cookie=c.encode(b)+"="+c.encode(d)+e,this},b.remove=function(a){return this.set(a,"",-1),this},b.get=function(a){return this.all()[a]},b.all=function(){if(""===a.cookie)return{};for(var b=a.cookie.split("; "),d={},e=0,f=b.length;e<f;e++){var g=b[e].split("="),h=c.decode(g.shift()),i=c.decode(g.join("="));d[h]=i}return d},"function"==typeof define&&define.amd?define(function(){return b}):window.cookie=b}(document),function(a,b,c,d){b.request={},b.noop=function(){};var e=function(a,b,d,f){var g=c.isArray(b),h=c.isPlainObject(b);c.each(b,function(b,i){f&&(b=d?f:f+"["+(h||c.isPlainObject(i)||c.isArray(i)?b:"")+"]"),!f&&g?a.add(i.name,i.value):c.isArray(i)||!d&&c.isPlainObject(i)?e(a,i,d,b):a.add(b,i)})},f=function(a){a.data&&"string"!=typeof a.data&&(a.data=b.param(a.data,a.traditional)),a.url=g(a.url,a.data),a.data=void 0},g=function(a,b){return""===b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")};b.ajaxSettings={success:b.noop,error:b.noop,complete:b.noop,context:null,timeout:0,id:0};var h=function(a,b){b.success&&b.success.call(b.context,a,"success"),j("success",b)},i=function(a,b,c){c.error&&c.error.call(c.context,b,a),j(b,c)},j=function(a,b){b.complete&&b.complete.call(b.context,a)};b.param=function(a,b){var c=[];return c.add=function(a,b){"string"!=typeof b&&"boolean"!=typeof b&&"number"!=typeof b||this.push(encodeURIComponent(a)+"="+encodeURIComponent(b))},e(c,a,b),c.join("&").replace(/%20/g,"+")},b.ajax=function(a,d){"object"==typeof a&&(d=a,a=void 0);var e=d||{};e.url=a||e.url;for(var h in b.ajaxSettings)void 0===e[h]&&(e[h]=b.ajaxSettings[h]);if(e.id=c.hash(e.url),e.data||(e.data={}),e.data.jsonp_callback_id=e.id,e.data.jsonp_callback="app.jsonp.callback",f(e),e.url=g(e.url,"_="+(new Date).getTime()),e.timeout=3e4,e.timeout>0&&setTimeout(function(){delete b.request[e.id];var a=document.getElementById(e.id);a&&document.body.removeChild(a),i(null,"timeout",this)},e.timeout),!b.request[e.id]){b.request[e.id]=d;var j=document.createElement("script");j.id=e.id,j.src=e.url,document.body.appendChild(j)}},b.callback=function(a,c){var d=b.request[a];if(d){h(c,d),delete b.request[a];var e=document.getElementById(a);e&&document.body.removeChild(e)}},b.get=function(d,e,f,g){a.util.isPlainObject(e)||(e={});var h={};h.url=d,h.data=e,h.error=function(b){a.util.log("请求"+d+"错误，jsonp语法未成功。"),a.disableError||(b={},b.error="网络访问出错，请稍后再试。",b.reset=!0,"function"==typeof g?g(b):a.error(b))},h.success=function(b){"string"==typeof b&&""!==b&&(b=c.eval("("+b+")")),!b||b.error&&0!==b.error&&"0"!==b.error?"function"==typeof g?g(b):a.error(b):f&&f(b)},b.ajax(h)}}(window.app,window.app.jsonp={},window.app.util),function(a,b,c){c.enableRetry=!0,c.post=function(d,e,f,g,h){if(!1===a.optAjax)return void a.error("没有配置ajax执行类");a.util.isPlainObject(e)||(e={});var i={};i.url=d,i.type="POST",i.dataType="json",i.data=e,i.error=function(b){a.util.log("请求"+d+"错误，问题是："+b.statusText+"，状态："+b.status+"，返回："+b.responseText),!0===h?(b={},b.error="网络访问出错，请稍后再试。",b.reset=!0,"function"==typeof g?g(b):a.disableError||a.error(b)):c.enableRetry&&c.post(d,e,f,g,!0)},i.success=function(c){"string"==typeof c&&""!==c&&(c=b.eval("("+c+")")),!c||c.error&&0!==c.error&&"0"!==c.error?"function"==typeof g?g(c):a.error(c):f&&f(c)},a.optAjax.ajax(i)}}(window.app,window.app.util,window.app.http={}),function(a){a.validate=function(a,b){if(!a.hasRule)return!0;for(var c=!1,d=0;d<b.length;d++)if(""!==b[d]){c=!0;break}if(!c&&this.hasRequired(a))return""!==a.required?a.required:""!==a.valtext&&a.valtext;if(c)for(var e in a)if("required"!==e&&!this.validateItem(e,a[e],b))return!1;return!0},a.validateItem=function(a,b,c){for(var d=0;d<c.length;d++)if(this.rule[a]&&!this.rule[a](c[d],b))return!1;return!0},a.hasRequired=function(a){return a.hasOwnProperty("required")},a.rule={},a.rule.pattern=function(a,b){return new RegExp(b,"g").test(a)},a.rule.email=function(b){return a.regex.email.test(b)},a.rule.url=function(b){return a.regex.url.test(b)},a.rule.tel=function(b){return a.regex.tel.test(b)},a.rule.confirm=function(a,b){return a==b},a.rule["data-validate"]=function(b,c){return!a.regex[c]||a.regex[c].test(b)},a.regex={},a.regex.email=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,a.regex.mobile=/^1[34578]{1}\d{9}$/,a.regex.url=/[a-zA-z]+:\/\/[^\s]*/,a.regex.tel=/\d+/}(window.Validate={}),function(a,b,c,d){function e(a){this.name=a,this.values=[],this.validateRule={},this.valtext=""}e.prototype.getValue=function(){return 1==this.values.length?this.values[0]:this.values},e.prototype.noValidate=function(){if(b){var a=b.validate(this.validateRule,this.values);if("string"==typeof a)return a;if(!a)return this.valtext}var d=this.item;return d.attributes["error-to-parent"]&&d.parentElement&&(d=d.parentElement),c.removeClass(d,"has-error"),!1},e.prototype.showError=function(b){var d=this.item;if(""!==a.errorHtml){var e=d.name+"_error",f=document.getElementById(e);if(f)f.innerHTML=b;else{var g=document.createElement("span");g.innerHTML=a.errorHtml,g.children[0].innerHTML=b,g.children[0].id=e,g.children[0].name=e,g=g.children[0],c.insertAfter(g,d)}}"function"==typeof d.focus&&d.focus(),d.attributes["error-to-parent"]&&d.parentElement&&(d=d.parentElement),c.addClass(d,"has-error")},a.val=function(b,c){if("string"==typeof b&&""!==b){var d;if("#"==b.substr(0,1)){b=b.substr(1),d=[];var e=document.getElementById(b);e&&d.push(e)}else d=document.getElementsByName(b);if(d&&0!==d.length){var f=this.getItemsValue(d);for(var g in f){var h,i=f[g];return!0===c?!1===(h=i.noValidate())?i.getValue():(h&&a.isAlertError&&app.error(h),void i.showError(h)):i.getValue()}}}},a.getItemsValue=function(b){for(var c,d={},f=0;f<b.length;f++)if(c=b[f],!c.disabled&&c.name){var g;if(d[c.name]?g=d[c.name]:(g=new e(c.name),g.item=c,d[c.name]=g),"INPUT"===c.tagName?"radio"===c.type||"checkbox"===c.type?c.checked&&g.values.push(c.value):g.values.push(c.value):"SELECT"===c.tagName?c.selectedIndex>=0&&c.options[c.selectedIndex].value&&g.values.push(c.options[c.selectedIndex].value):g.values.push(c.value),c.attributes.hasOwnProperty("valtext")?""!==c.attributes.valtext.value&&(g.valtext=c.attributes.valtext.value):c.attributes.hasOwnProperty("placeholder")&&""!==c.attributes.placeholder.value&&(g.valtext=c.attributes.placeholder.value),c.attributes.hasOwnProperty("required")&&(""===c.attributes.required.value?g.validateRule.required=g.valtext:g.validateRule.required=c.attributes.required.value,g.validateRule.hasRule=!0),c.attributes.hasOwnProperty("confirm")&&(g.validateRule.confirm=a.val(c.attributes.confirm.value),g.validateRule.hasRule=!0),c.attributes.hasOwnProperty("pattern")&&""!==c.attributes.pattern.value)g.validateRule.pattern=c.attributes.pattern.value,g.validateRule.hasRule=!0;else if(c.attributes.hasOwnProperty("data-validate"))g.validateRule["data-validate"]=c.attributes["data-validate"].value,g.validateRule.hasRule=!0;else if("INPUT"===c.tagName)switch(c.type){case"date":case"datetime":case"month":case"week":case"time":case"email":case"number":case"tel":case"url":g.validateRule[c.type]="",g.validateRule.hasRule=!0}}return d},a.check=function(b){return void 0!==a.getFormParam(b,!0)},a.isAlertError=!0,a.errorHtml="",a.getFormParam=function(b,d){var e,f={},g=0;if(c.isArray(b)){for(;g<b.length;g++){if(void 0===(e=this.val(b[g],d)))return;f[b[g]]=e}return f}if(""===b)return f;var h;if("string"==typeof b?h=document.getElementById(b):"object"==typeof b&&(h=b),!h)return f;var i=[];for(g=0;g<h.length;g++)i.push(h[g]);var j=this.getItemsValue(i);for(var k in j){var l,m=j[k];if(!0===d){if(!1!==(l=m.noValidate()))return l&&a.isAlertError&&app.error(l),void m.showError(l);f[m.name]=m.getValue()}else f[m.name]=m.getValue()}return f}}(window.app.form={},window.Validate,window.app.util);